<!DOCTYPE html>
<html>
<head>
    <title>QR orqali olish/qaytarish</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body class="container mt-5">
    <h1 class="mb-4">QR kodni kameradan oâ€˜qing</h1>
    <div id="reader" style="width:300px;"></div>
    <form method="POST" class="mt-3">
        <input id="qr_data" name="qr_data" class="form-control mb-2" placeholder="QR ma'lumot (title|author)" required>
        <input name="student_id" class="form-control mb-2" placeholder="Talaba ID" required>
        <button type="submit" class="btn btn-primary">Yuborish</button>
    </form>
    <a href="/" class="btn btn-secondary mt-2">Ortga</a>

    <script>
        const qrReader = new Html5Qrcode("reader");
        qrReader.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, (decodedText, decodedResult) => {
            document.getElementById("qr_data").value = decodedText;
            qrReader.stop();
        });
    </script>
</body>
</html>
